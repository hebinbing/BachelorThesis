#ifndef ASTAR_H
#define ASTAR_H
#include <limits.h>
#include <QDebug>
#include <unistd.h>
#include <math.h>
#define INFINITY   1000000
#define nodeNumber 28
class Astar
{
public:
    Astar();
    int startNode=26;
    int goalNode=1;
    int path[nodeNumber];
    int pathcounter=0;
    float points[28][3]={{2.6,3,1.2},{2.8,1.2,0.7},{1.7,1.9,1.7},{1,2.9,-2},{0.4,1.2,0.3},//badi 5
                         {1.3,0.8,-0.9},{2.9,0,1},{1.7,-0.7,-2},{2.7,-2,-0.5},{2.8,-4,0.6} //badi10
                         ,{2.2,-3.2,2.5},{0.7,-0.8,0.5},{1,-2.2,-0.3},{0,-3.2,-3},{-0.7,-1.8,2.9},//badi15
                         {0,0,-0.7},{1.5,-4,1.7},{-1.5,-2,-0.9},{-1.2,-0.8,-2.2},{-0.8,0.8,0.8},//badi20
                         {-0.6,1.5,2.5},{-1.2,3,1},{-2,2.7,1.9},{-1.5,1.2,-2},{-1.9,0.1,-3},//badi25
                         {-1.5,-3.5,3},{-0.5,2.5,0.2},{-1,3,0.9}};

    int edges[28][28]={
        {0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0},
        {0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0},
        {0,1,1,0,1,0,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,1,1,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,1,0,1,0,0,0,0,1,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,1,1,0,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,1,0,0,0,0,0,0,0,1,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,0,1,1,0,0,0,0,0,0,1,0,0},
        {0,0,0,0,1,1,0,1,0,0,0,1,0,0,1,0,0,0,1,1,1,0,0,1,1,0,0,0},
        {0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,1,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,1,0,1,0,0,0,0,1,0,0,0},
        {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,1,0,1,0},
        {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,1,1,0,1,1},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1,1},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,1},
        {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,0,1,0,1,1},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,1,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0}
    };
    float distances[28][28]={
        {0,181.108,142.127,160.312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {181.108,0,130.384,0,0,155.242,120.416,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {142.127,130.384,0,122.066,147.648,117.047,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {160.312,0,122.066,0,180.278,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,155.242,0},
        {0,0,147.648,180.278,0,98.4886,0,0,0,0,0,0,0,0,0,126.491,0,0,0,126.491,104.403,0,0,190,0,0,158.114,0},
        {0,155.242,117.047,0,98.4886,0,178.885,155.242,0,0,0,170.88,0,0,0,152.643,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,120.416,0,0,0,178.885,0,138.924,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,155.242,138.924,0,164.012,0,0,100.499,165.529,0,0,183.848,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,164.012,0,0,130,0,171.172,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,100,0,0,0,0,0,130,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,130,100,0,0,156.205,0,0,0,106.301,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,170.88,0,100.499,0,0,0,0,143.178,0,172.047,106.301,0,0,190,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,165.529,171.172,0,156.205,143.178,0,141.421,174.642,0,186.815,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,141.421,0,156.525,0,170,192.094,0,0,0,0,0,0,0,152.971,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,172.047,174.642,156.525,0,193.132,0,82.4621,111.803,0,0,0,0,0,0,187.883,0,0},
        {0,0,0,0,126.491,152.643,0,183.848,0,0,0,106.301,0,0,193.132,0,0,0,144.222,113.137,161.555,0,0,192.094,190.263,0,0,0},
        {0,0,0,0,0,0,0,0,0,130,106.301,0,186.815,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,192.094,82.4621,0,0,0,123.693,0,0,0,0,0,0,150,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,190,0,0,111.803,144.222,0,123.693,0,164.924,0,0,0,0,114.018,0,0,0},
        {0,0,0,0,126.491,0,0,0,0,0,0,0,0,0,0,113.137,0,0,164.924,0,72.8011,0,0,80.6226,130.384,0,172.627,0},
        {0,0,0,0,104.403,0,0,0,0,0,0,0,0,0,0,161.555,0,0,0,72.8011,0,161.555,184.391,94.8683,191.05,0,100.499,155.242},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,161.555,0,85.44,182.483,0,0,86.0233,20},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,184.391,85.44,0,158.114,0,0,151.327,104.403},
        {0,0,0,0,190,0,0,0,0,0,0,0,0,0,0,192.094,0,0,0,80.6226,94.8683,182.483,158.114,0,117.047,0,164.012,186.815},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,190.263,0,0,114.018,130.384,191.05,0,0,117.047,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,152.971,187.883,0,0,150,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,155.242,158.114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172.627,100.499,86.0233,151.327,164.012,0,0,0,70.7107},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,155.242,20,104.403,186.815,0,0,70.7107,0}
    };


    float theta_error[28][28]={


        {0,-2.66005,2.82357,2.00092,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0.978361,0,1.87177,0,0,2.6991,-2.18756,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {-0.818026,-2.26664,0,0.47843,1.93244,2.66053,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {2.05933,0,1.04002,0,0.0900037,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.880898,0},
        {0,0,0.190849,0.928411,0,-0.718132,0,0,0,0,0,0,0,0,0,-2.19245,0,0,0,-3.11975,2.54704,0,0,2.8385,0,0,1.87325,0},
        {0,1.15751,2.11893,0,-2.65972,0,0.436445,-0.410101,0,0,0,-1.02947,0,0,0,-1.68985,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0.650845,0,0,0,1.67485,0,2.66657,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,-2.45169,2.52498,0,1.08499,0,0,-1.04183,-0.0073309,0,0,-1.53211,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,2.7234,0,0,-1.46549,0,-2.52439,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,1.6112,0,0,0,0,0,2.5385,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,-1.32709,2.8528,0,0,-0.0562384,0,0,0,1.49047,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0.708933,0,-0.403424,0,0,0,0,-1.85961,0,-3.02125,1.78653,0,0,2.6385,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,1.43108,0.414016,0,-0.394646,2.0788,0,-2.0561,-3.07259,0,-0.999757,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,-2.49769,0,-1.24865,0,2.51014,-0.816241,0,0,0,0,0,0,0,0.239006,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,-2.28284,-3.131,2.27294,0,-1.70319,0,0.483478,-0.868649,0,0,0,0,0,0,1.27559,0,0},
        {0,0,0,0,1.94595,1.24856,0,0.309486,0,0,0,-0.151874,0,0,-1.2416,0,0,0,-1.8535,3.0531,2.64821,0,0,-3.11624,-2.49408,0,0,0},
        {0,0,0,0,0,0,0,0,0,-1.69991,-0.851126,0,0.13865,0.948542,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0.225352,1.14189,0,0,0,2.22273,0,0,0,0,0,0,-0.915682,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,2.20009,0,0,1.09294,2.78491,0,0.384318,0,-2.75728,0,0,0,0,-1.85125,0,0,0},
        {0,0,0,0,-0.481342,0,0,0,0,0,0,0,0,0,0,-1.58531,0,0,-2.61568,0,0.489404,0,0,1.81935,2.90523,0,0.593031,0},
        {0,0,0,0,-2.79136,0,0,0,0,0,0,0,0,0,0,2.5898,0,0,0,1.931,0,-0.55179,-0.0701263,0.960251,1.46092,0,-1.03197,-0.671694},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2.1902,0,2.49727,-2.73585,0,0,-1.62016,-0.999907},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2.60853,-1.54432,0,3.13105,0,0,-2.03246,-1.61164},
        {0,0,0,0,2.00009,0,0,0,0,0,0,0,0,0,0,1.32535,0,0,0,1.48095,2.31866,-2.87744,-2.39055,0,0.0805254,0,2.91201,-2.98324},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.94751,0,0,2.09034,-2.71636,-2.46067,0,0,-2.06107,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,-2.62259,-1.96601,0,0,-1.67727,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0.0575097,-1.16516,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1.94538,-1.87037,2.31825,2.80595,-2.4264,0,0,0,2.1531},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-2.2101,2.2385,2.52996,-2.74165,0,0,-1.68531,0}
    };

    float weight[28][28]={

        {0,37.8799,33.9442,31.5038,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {28.2443,0,27.0228,0,0,34.8704,27.5862,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {22.453,29.2853,0,17.9995,29.5284,29.875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {31.8384,0,21.2173,0,23.0504,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24.4526,0},
        {0,0,19.5495,27.8543,0,16.4258,0,0,0,0,0,0,0,0,0,28.3736,0,0,0,33.6868,27.6443,0,0,40.0139,0,0,30.4975,0},
        {0,26.0375,26.7718,0,27.5506,0,24.8613,21.755,0,0,0,27.2586,0,0,0,28.7628,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,18.7812,0,0,0,31.9571,0,32.6443,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,33.4528,31.833,0,26.7182,0,0,18.5318,20.7331,0,0,31.7596,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,36.1059,0,0,24.6469,0,35.8606,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,21.7318,0,0,0,0,0,30.795,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,23.8539,28.8458,0,0,19.8479,0,0,0,21.8276,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,25.422,0,14.8739,0,0,0,0,28.5523,0,38.8169,23.524,0,0,38.8679,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,28.8909,23.7687,0,21.7868,29.8082,0,29.4586,39.4354,0,29.0802,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,31.9888,0,26.7201,0,35.6325,28.6886,0,0,0,0,0,0,0,20.4908,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,34.586,39.7701,32.589,0,33.9003,0,13.078,18.9525,0,0,0,0,0,0,30.7942,0,0},
        {0,0,0,0,26.9612,26.2343,0,24.7543,0,0,0,14.1578,0,0,31.2556,0,0,0,28.6478,31.6356,35.3679,0,0,41.867,38.0733,0,0,0},
        {0,0,0,0,0,0,0,0,0,25.9901,18.1644,0,24.1463,26.6849,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,25.303,16.8505,0,0,0,28.1973,0,0,0,0,0,0,23.9966,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,36.356,0,0,20.2376,33.9846,0,17.6637,0,36.414,0,0,0,0,24.8594,0,0,0},
        {0,0,0,0,18.5693,0,0,0,0,0,0,0,0,0,0,23.2255,0,0,35.6027,0,11.9043,0,0,20.5022,32.9442,0,24.9763,0},
        {0,0,0,0,29.0442,0,0,0,0,0,0,0,0,0,0,35.0333,0,0,0,20.1643,0,23.356,23.4507,17.3605,32.252,0,18.4753,23.2539},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32.7437,0,24.9887,38.4861,0,0,20.036,8.22921},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37.9951,19.5286,0,37.7044,0,0,30.5614,22.2847},
        {0,0,0,0,35.21,0,0,0,0,0,0,0,0,0,0,31.6057,0,0,0,18.5633,25.1439,39.2974,33.4615,0,15.0923,0,37.1866,40.4451},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40.6714,0,0,26.2294,31.8621,37.9803,0,0,26.4403,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,34.1482,34.7501,0,0,28.3603,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,19.7348,26.4403,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32.7249,23.2791,24.0359,34.9933,34.4042,0,0,0,21.1756},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32.0686,15.326,27.5464,39.0608,0,0,18.4952,0}
    };

    float hurestic[28];

    /*
    float edges[10][10]={{0,1,0,0,0,1,0,0,0,0}
                       ,{1,0,1,1,0,0,0,0,0,0}
                       ,{0,1,0,1,1,0,0,0,0,0}
                       ,{0,1,1,0,1,0,0,0,0,0}
                       ,{0,0,0,0,0,0,0,0,1,1}
                       ,{1,0,0,0,0,0,1,1,0,0}
                       ,{0,0,0,0,0,1,0,0,1,0}
                       ,{0,0,0,0,0,1,0,0,1,0}
                       ,{0,0,0,0,1,0,1,1,0,1}
                       ,{0,0,0,0,1,0,0,0,1,0}
                      };
    float weight[10][10]={{0,8,0,0,0,3,0,0,0,0}
                       ,{8,0,3,2,0,0,0,0,0,0}
                       ,{0,3,0,1,5,0,0,0,0,0}
                       ,{0,2,1,0,8,0,0,0,0,0}
                       ,{0,0,0,0,0,0,0,0,5,5}
                       ,{3,0,0,0,0,0,1,7,0,0}
                       ,{0,0,0,0,0,1,0,0,3,0}
                       ,{0,0,0,0,0,2,0,0,2,0}
                       ,{0,0,0,0,5,0,3,2,0,3}
                       ,{0,0,0,0,5,0,0,0,3,0}
                      };

    float hurestic[10]={10,8,5,7,3,6,5,3,1,0};
    */
    float gScore[nodeNumber],fScore[nodeNumber];

    int openSet[nodeNumber];
    int closeSet[nodeNumber];
    int q;

    void aStar();
    void findPath();
};

#endif // ASTAR_H
